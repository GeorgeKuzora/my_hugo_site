---
title: "Fedora Post Install"
subtitle: ""
description: ""
date: 2024-01-03T22:31:19+03:00
author: "Георгий Кузора"
image: "img/bkg3.png"
tags: ["linux", "fedora", "OS", "gnome"]
categories: ["Tech"]
draft: true
---

## Что делать после установки Fedora

Для того чтобы получить максимум от того что может предоставить операционная система Fedora, после ее установки нужно настроить ее под свои нужды.

## Обязательные действия

### Настройка swappiness

Современные компьютеры обладают большим объемом оперативной памяти. Обычно не возникает проблем с недостатком памяти при котором бы приходилось задействовать swap память.

Fedora по умолчанию создает виртуальный раздел под swap в форме ZRAM. Поэтому при установке Fedora не нужно выделять отдельный swap раздел на диске. Но даже при том что у нас есть zram мы не хотим чтобы система использовала его до того как вся память будет исчерпана. Для того чтобы задать такое поведение нужно:

1. Открыть файл `sysctl.conf` в редакторе vi командой `sudo vi /etc/sysctl.conf`.
2. Добавить строку `vm.swappiness = 0` в файл `sysctl.conf` - это означает, что swap начнет создаваться только после полного исчерпания оперативной памяти.

В некоторых ситуациях можно также указать `vm.overcommit_memory = 1`. Это позволит программам запрашивать память, вне зависимости от того сколько памяти доступно физически. Более подробно на эту тему [читать здесь](https://serverfault.com/questions/606185/how-does-vm-overcommit-memory-work).

### Настройка DNF

DNF менеджер пакетов в Fedora. От обладает репутацией очень медленного менеджера пакетов. Чтобы поправить это, следует указать дополнительные настройки.

1. Откройте файл `/etc/dnf/dnf.conf` в редакторе vi командой `sudo vi /etc/dnf/dnf.conf`.
2. Добавьте следующие строки в конец файла:
   - `fastestmirror=True` - DNF будет использовать наиболее быстрое зеркало для скачивания пакетов.
   - `max_parallel_downloads=10` - DNF сможет производить до 10 загрузок параллельно.
   - `deltarpm=True` - DNF будет загружть гораздо меньшие дельта-файлы RPM и компилировать их в RPM локально.
   - `defaultyes=True` - По умолчанию DNF будет предлагать подтвердить Yes нажатием Enter. По умолчанию нажатие Enter подтверждает No.
   - `keepcache=True` - DNF будет сохранять кэш данных о версиях пакетов в течении некоторого времени.

### Включение RPM Fusion

В Fedora по умолчанию отключены репозитории для множества бесплатных и проприетарных пакетов .rpm например Steam, Discord, некоторые мультимедийные кодеки и так далее. Чтобы получить к ним доступ нужно подключить дополнительные репозитории.

```shell
sudo dnf install https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm
```

Репозитории RPM Fusion также предоставляют метаданные Appstream, чтобы пользователи могли устанавливать пакеты с помощью Gnome Software/KDE Discover. Следующая команда установит необходимые пакеты:

```shell
sudo dnf groupupdate core
```

### Обновление системы

После настройки DNF и RPM Fusion стоит обновить систему:

1. `sudo dnf -y update`
2. `sudo dnf -y upgrade --refresh`
3. После обновления перезагрузите систему.

###
